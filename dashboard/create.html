<!DOCTYPE html>
<html lang="">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <link rel="stylesheet" href="create.css" />
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script defer src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script src="../js/selec2js.js"></script>
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/alpinejs/3.10.2/cdn.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />
    <link rel="stylesheet" href="https://ccandName: "",
                    pos: "",
                    level: "",
                    manifesto: ""candName: "",
                    pos: "",candName: "",
                    pos: "",
                    level: "",
                    manifesto: ""
                    level: "",
                    manifesto: ""dn.jsdelivr.net/npm/@splidejs/splide@4.0.7/dist/css/splide.min.css" />
    <!-- <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script> -->

    <title>Swiftvote</title>
</head>

<body>

    <header>
        <div class="logo">
            <img src="../image/Swiftvote Logo.png" alt="" />
        </div>
        <div class="search">
            <button type="submit">
                <i class="fa-solid fa-magnifying-glass"></i>
            </button>
            <input type="search" name="Search" id="search" placeholder="Search" />
        </div>

        <div class="extra-info">
            <div class="box-1" x-data="dropdown()">
                <i class="fa-solid fa-moon"></i>
            </div>

            <div class="" x-data="dropdown()">
                <div class="box-2" @click="toggle()">
                    <i class="fa-solid fa-info"></i>
                </div>
                <!-- info dropdown -->
                <div class="dropdown-3" x-cloak x-show="isOpen" @click.away="isOpen = false" x-transition:enter.10ms
                    x-transition:leave.delay.20ms>
                    <div class="account">
                        <div class="empty"></div>
                        <div class="middle">Information page</div>
                        <div class="close" @click="toggle()">
                            <i class="fa-light fa-xmark"></i>
                        </div>
                    </div>
                    <hr />
                    <div class="conten" id="info">
                        <div class="info">
                            <p>
                                <b>
                                    Note that once the election starts, you will not be able
                                    to register voters and candidates again</b>
                            </p>
                        </div>
                        <br />
                        <hr />
                        <div class="profil">
                            <i class="fa-light fa-arrow-left"></i>
                            <i class="fa-light fa-arrow-right"></i>
                        </div>
                    </div>
                </div>
                <!-- info dropdown ends-->
            </div>

            <div class="" x-data="dropdown()">
                <div class="box-3" @click="toggle()" @keydown.escape="isOpen = false">
                    <i class="fa-solid fa-bell"></i>
                </div>

                <!-- Notification dropdown -->
                <div class="dropdown-2" x-cloak x-show="isOpen" @click.away="isOpen = false" x-transition:enter.10ms
                    x-transition:leave.delay.20ms>
                    <div class="account">
                        <div class="empty"></div>
                        <div class="middle">Notifications</div>
                        <div class="close" @click="toggle()">
                            <i class="fa-light fa-xmark"></i>
                        </div>
                    </div>
                    <hr />
                    <div class="content" id="content">
                        <div class="img">
                            <img src="images/telescope/amico.png" alt="" />
                        </div>
                        <br />
                        <hr />
                        <div class="profile">
                            <div class="text">
                                <p><b>You've got no notification</b></p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- notification dropdown ends -->
            </div>

            <div class="" x-data="dropdown()">
                <div class="box" @click="toggle()" @keydown.escape="isOpen = false">
                    <span>UJ</span>
                </div>

                <!-- modal for profile -->

                <div class="dropdown-1" x-cloak x-show="isOpen" @click.away="isOpen = false" x-transition:enter.10ms
                    x-transition:leave.delay.20ms>
                    <div class="account">
                        <div class="empty"></div>
                        <div class="middle">Account</div>
                        <div class="close" @click="toggle()">
                            <i class="fa-light fa-xmark"></i>
                        </div>
                    </div>
                    <hr />
                    <div class="content">
                        <div class="profile">
                            <div class="box">
                                <span>UJ</span>
                            </div>

                            <div class="text">
                                <p>Uncle Jerry</p>
                                <small>Unclejerry@gmail.com</small>
                            </div>
                        </div>
                        <div class="filter">
                            <input type="button" value="Admin ID: @unclejerry.2345" id="id-input" />
                        </div>
                        <br />
                        <hr />
                        <div class="details">
                            <ul>
                                <li>
                                    <a href="">Account Preference</a>
                                </li>
                            </ul>
                            <ul>
                                <li>
                                    <a href="">Payment method</a>
                                </li>
                            </ul>
                            <ul>
                                <li>
                                    <a href="">Settings</a>
                                </li>
                            </ul>
                            <ul>
                                <li>candName: "",
                    pos: "",
                    level: "",
                    manifesto: ""
                                    <a href="">Help</a>
                                </li>
                            </ul>
                            <hr />
                            <ul>
                                <li>
                                    <a href=""><i class="fa-light fa-arrow-right-from-bracket"></i>Logout</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <!-- modal for profile ends -->
            </div>
        </div>
    </header>
    <main>
        <div class="container" x-data="submitForm()">
            <div class="pagination ">
                <a href="create.html">
                    <div class="page cpointer">
                        <div class="badge">1</div>
                        <h4>Election details</h4>
                    </div>
                </a>
                <div class="line1"></div>
                <div class="page1">
                    <div class="badge">2</div>
                    <h4>Register candidates</h4>
                </div>
                <div class="line1"></div>

                <div class="page1">candName: "",
                    pos: "",
                    level: "",
                    manifesto: ""
                    <div class="badge">3</div>
                    <h4>Register voters</h4>
                </div>
                <div class="line1"></div>

                <div class="page1">
                    <div class="badge">4</div>
                    <h4>Data display</h4>
                </div>
                <div class="line1"></div>

                <div class="page1">
                    <div class="badge">5</div>
                    <h4>Pay & Host</h4>
                </div>
            </div>
            <div class="center">
                <div class="text">
                    Now, lets dive into the election setup.<b>Add election details.</b>
                </div>
                <div class="form">
                    <div class="first-in">
                        <div class="electiontitle">
                            <div class="logo">
                                Logo
                                <label for="logo" id="label"> +

                                    <input type="file" id="logo">
                                </label>
                            </div>
                            <div class="title">
                                <label for="etitle ">Election title</label><br>
                                <input type="text" id="etitle" name="etitle" placeholder="title here..."
                                    x-model="formData.title" class="electoraltype">
                            </div>
                        </div>
                        <div class="electiontitle">
                            <div class="title">
                                <label for="esystem">Type of electoral system</label><br>
                                <select name="esystem" id="esystem">
                                    <option value="disable" disabled>Select...</option>
                                    <option value="first-past-the-post">Plurality electoral system</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="second-in">
                        <div class="type">
                            <div class="title">
                                <label for="adminId ">Type of election</label><br>
                                <select name="t_election" id="t_election">
                                    <option value="disable" disabled>Select...</option>
                                    <option value="general">General</option>
                                    <option value="sug">SUG</option>
                                    <option value="department">Department</option>
                                    <option value="faculty">Faculty</option>
                                    <option value="association">Association</option>
                                    <option value="social-contest">Social contest</option>
                                </select>
                            </div>
                        </div>

                        <div class="electiontype">
                            <div class="title">
                                <label for="adminId ">Duration
                                <input type="datetime-local" id="start" name="sts" placeholder="start"
                                    x-model="formData.title">

                                </label><br>
                            </div>
                            <div class="title">
                                <label for="adminId "></label><br>
                                <input type="datetime-local" id="finish" name="finish" placeholder="Finish"/>
                               
                            </div>
                        </div>
                        <!-- <div class="electiontype">
                            <div class="title">
                                <label for="start ">Duration
                                    <input type="time" id="start" name="sts" placeholder="start"
                                        x-model="formData.title" value="start">

                                </label><br>
                            </div>
                            <div class="title">
                                <label for="adminId "></label><br>
                                <input type="datetime-local" id="finish" name="finish" placeholder="Finish"
                               
                            </div>
                        </div> -->
                    </div>
                </div>

                <button value="next" id="next" @click="$el.innerHTML = 'submiting'">
                    Next
                </button>
            </div>
    </main>


        const etitle = document.getElementById('etitle');
        const logo = document.getElementById('logo');
        const esystem = document.getElementById('esystem');
        const t_election = document.getElementById('t_election');
        const electionStart = document.getElementById('start');
        const electionFinish = document.getElementById('finish');
        const nextProcedure = document.getElementById('next');

        

        nextProcedure.addEventListener('click', async function() {
            const response = await uploadImage(logo.files[0]);

            const res = await fetch(baseUrl + 'school-election/create-election', {
                method: 'POST',
                headers: {
                    accesstoken: localStorage.getItem('accesstoken'),
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    electionTitle: etitle.value,
                    electionLogo: response.secure_url,
                    electionLogoPublicId: response.public_id,
                    electoralSystem: esystem.value,
                    electionType: t_election.value,
                    durationStart: electionStart.value,
                    durationEnd: electionFinish.value
                })
            });

            const data = await res.json();

            if(res.status == 201) {
                console.log(data);
                localStorage.setItem('electionID', data.electionID);
                location.assign('regcand.html');
            }

            
        });


        

        // this.buttonLabel = "Submitting...";
        // this.loading = true;
            // "https://swiftvote-test-api.herokuapp.com/v1/school-election/admin/login",

        if(!localStorage.getItem('accesstoken')) {
      location.assign('../login.html');
    }
    </script> -->

</body>
<!-- <script src="../js/utilities/uploadToCloudinary.js"></script>
<script src="../js/utilities/baseUrl.js"></script> -->


</html>